<section class="auth-hero">
  <div class="session-new-box">
    <header class="auth-card__head">
      <p class="eyebrow">Welcome</p>
      <h1>다시 공부를 이어가요</h1>
      <p class="page-subtitle">이메일과 비밀번호를 입력하면 대시보드로 이동합니다.</p>
    </header>

    <%= form_with(url: login_path, scope: :session, local: true, html: { class: "stacked-form" }) do |form| %>
      <div class="session-new-form-group">
        <%= form.label :email, "이메일" %>
        <%= form.text_field :email, id: "email", class: "session-new-form-control" %>
        <div id="email-validation" class="validation-message"></div>
      </div>

      <div class="session-new-form-group">
        <%= form.label :password, "비밀번호" %>
        <%= form.password_field :password, id: "password", class: "session-new-form-control" %>
        <div id="password-validation" class="validation-message"></div>
      </div>

      <div class="auth-card__actions">
        <%= form.submit "로그인", class: "btn btn--primary" %>
        <%= link_to "회원가입", signup_path, class: "btn btn--ghost" %>
      </div>
    <% end %>
  </div>
</section>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const emailInput = document.getElementById('email');
        const passwordInput = document.getElementById('password');

        emailInput.addEventListener('input', validateEmail);
        passwordInput.addEventListener('input', validatePassword);

        function validateEmail() {
            const message = document.getElementById('email-validation');
            const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (emailPattern.test(emailInput.value)) {
                message.classList.remove('invalid');
                message.classList.add('valid');
            } else {
                message.classList.remove('valid');
                message.classList.add('invalid');
            }
        }

        function validatePassword() {
            const message = document.getElementById('password-validation');
            if (passwordInput.value.length >= 1 && passwordInput.value.length <= 8) {
                message.classList.remove('invalid');
                message.classList.add('valid');
            } else {
                message.classList.remove('valid');
                message.classList.add('invalid');
            }
        }
    });
</script>
